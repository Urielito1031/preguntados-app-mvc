<style>
    body, html {
        height: 100%;
        margin: 0;
        font-family: sans-serif;
        background-color: #f0eefc;
    }
    .register-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100%; /* Para asegurar que el contenedor ocupe al menos toda la altura */
        padding: 20px 0;
    }
    .register-form {
        background-color: #ffffff;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        width: 100%;
        max-width: 500px;
        text-align: center;
        background-color: #eadaff; /* Color de fondo del formulario */
    }
    .register-form h2 {
        color: #4a2a75;
        margin-bottom: 20px;
    }
    .profile-icon {
        font-size: 50px;
        color: #4a2a75;
        background-color: #d9c8ff;
        border-radius: 50%;
        width: 100px;
        height: 100px;
        line-height: 100px;
        margin: 0 auto 20px;
        position: relative;
    }
    .profile-icon .plus-sign {
        position: absolute;
        bottom: 5px;
        right: 5px;
        background-color: #4a2a75;
        color: white;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        line-height: 25px;
        font-size: 16px;
    }
    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 15px;
    }
    .form-grid input {
        width: 100%;
        padding: 10px;
        border: none;
        border-bottom: 1px solid #4a2a75;
        background-color: transparent;
        color: #4a2a75;
        box-sizing: border-box;
    }
    .form-grid input::placeholder {
        color: #4a2a75;
    }
    .sex-options {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .sex-options button {
        background-color: #9d78e2;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
    }
    #mapa { /* Estilos para el iframe del mapa */
        width: 100%;
        height: 200px; /* Altura ajustada para el formulario */
        border: 1px solid #d9c8ff; /* Borde sutil */
        margin-bottom: 20px;
        border-radius: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #4a2a75;
    }
    .action-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .action-buttons button {
        background-color: #9d78e2;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        flex-grow: 1;
    }
    .login-link {
        margin-bottom: 20px;
        color: #4a2a75;
    }
    .login-link a {
        color: #4a2a75;
        font-weight: bold;
    }
    .submit-btn {
        background-color: #4a2a75;
        color: white;
        border: none;
        padding: 15px;
        width: 100%;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }
</style>

<div class="register-container">
    <!--
    <button onclick="document.getElementById('miModal').style.display='block'" class="w3-button w3-blue">Abrir Modal</button>-->

    <!-- Modal -->

    <div id="miModal" class="w3-modal w3-display-container">
        <div class="w3-modal-content w3-card-4 w3-display-middle" style="width: 50%; height: 20vh;">
            <header class="w3-container w3-purple w3-center w3-padding-large">
                <span onclick="document.getElementById('miModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                <h2>Validar email en <strong>5 segundos</strong></h2>
            </header>
            <div class="w3-container w3-xlarge">
                <p>Enviamos un correo a su casilla para validar email, esperamos su confirmación.</p>
            </div>
        </div>
    </div>



    <div class="register-form">
        <h2>REGISTRARSE</h2>
        <div class="profile-icon">
            <i class="fas fa-user"></i>
            <div class="plus-sign">+</div>
        </div>

        <form action="/usuario/processRegister" method="POST" enctype="multipart/form-data" id="formulario-registro">
            <div class="form-grid">
                <input type="file" name="imagen" placeholder="Imagen" required>
                <input type="text" name="nombre" placeholder="Nombre" required>
                <input type="text" name="apellido" placeholder="Apellido" required>
                <input type="date" name="fecha_nacimiento" placeholder="Fecha de nacimiento" required>
                <input type="text" name="nombre_usuario" placeholder="Nombre de usuario" required>
                <input type="email" name="correo" placeholder="Correo" required>
                <input type="password" name="contrasenia" placeholder="Contraseña" required>
                <input type="password" name="repetir_contrasenia" placeholder="Repetir contraseña" required>
                <input type="hidden" name="estado" id="estado" value="true">
            </div>

            <label style="color: #4a2a75;">Sexo</label>
            <div class="sex-options">
                <select name="genero">
                    <option value="Masculino">MASCULINO</option>
                    <option value="Femenino">FEMENINO</option>
                    <option value="Prefiero no cargarlo">OTRO</option>
                </select>
            </div>

            <div class="form-grid">
                <input type="text" id="pais" name="pais" placeholder="País">
                <input type="text" id="ciudad" name="ciudad" placeholder="Ciudad">
            </div>

            <iframe
                id="mapa"
                loading="lazy"
                allowfullscreen
                referrerpolicy="no-referrer-when-downgrade"
                src="https://maps.google.com/maps?q=Plaza%20de%20Mayo%2C%20Buenos%20Aires&output=embed">
            </iframe>

            <div class="action-buttons">
                <button type="button" onclick="actualizarMapa()">Verificar Ubicación</button>
            </div>

            <div class="login-link">
                <span>Ya tienes una cuenta?</span>
                <a href="/usuario/showLoginForm">Iniciar Sesión</a>
            </div>

            <button type="submit" class="submit-btn">Registrarse</button>
        </form>
    </div>
</div>
<script>
    function actualizarMapa() {
        var paisInput = document.getElementById("pais");
        var ciudadInput = document.getElementById("ciudad");
        var mapaIframe = document.getElementById("mapa");

        var pais = paisInput.value;
        var ciudad = ciudadInput.value;
        var direccion = "";

        if (pais && ciudad) {
            direccion = ciudad + ", " + pais;
        } else if (ciudad) {
            direccion = ciudad;
        } else if (pais) {
            direccion = pais;
        }

        if (direccion) {
            var url = "https://maps.google.com/maps?q=" + encodeURIComponent(direccion) + "&output=embed";
            mapaIframe.src = url;
        } else {
            alert("Por favor, ingresa un país y/o ciudad.");
        }
    }
    document.getElementById("formulario-registro").addEventListener("submit", function(event) {
        event.preventDefault(); // Evita el envío inmediato del formulario

        // Mostrar el modal antes de enviar
        document.getElementById('miModal').style.display = 'block';

        // Luego de mostrar el alert, enviar el formulario después de 5 segundos
        let formulario = this;
        setTimeout(function() {
            formulario.submit(); // Aquí 'formulario' sigue haciendo referencia al form
        }, 5000);
    });


</script>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
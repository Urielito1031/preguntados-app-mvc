<link rel="stylesheet" href="/public/css/register.css">

<section class="d-flex justify-content-center align-items-center m-5" style="min-height: 100vh;">
    <form class="col-12 col-sm-8 col-md-6 col-lg-4 d-flex flex-column align-items-center justify-content-center" action="/usuario/processRegister" method="POST">
        <h1 class="text-violet mb-4 text-center">{{titulo_h1}}</h1>

        <input type="file">

        <div class="d-flex justify-content-between flex-wrap">
            <input class="input-form m-2" type="text" name="nombre" placeholder="Nombre" aria-label="Nombre" required>
            <input class="input-form m-2" type="date" name="fecha_nacimiento" placeholder="Fecha de nacimiento" aria-label="nacimiento" required>
            <input class="input-form m-2" type="text" name="nombre_usuario" placeholder="Nombre de usuario" aria-label="usuario" required>
            <input class="input-form m-2" type="email" name="correo" placeholder="Correo" aria-label="Correo" required>
            <input class="input-form m-2" type="password" name="contrasenia" placeholder="Contraseña" aria-label="Contraseña" required>
            <input class="input-form m-2" type="password" name="repetir_contrasenia" placeholder="Repetir contraseña" aria-label="repetir_contraseña" required>
            <input class="input-form m-2" type="text" name="apellido" placeholder="Apellido" aria-label="Apellido" required>
        </div>

        <!--
        <label class="d-flex justify-content-around w-100 my-4" for="genero">
            {{#generos}}
                <input type="radio" name="genero" aria-label="genero" value="{{valor}}">{{texto}}
            {{/generos}}
        </label>
        -->

        <label style="color: #4a2a75;">Sexo</label>
            <div class="sex-options">
                <button type="button">MASCULINO</button>
                <button type="button">FEMENINO</button>
                <button type="button">OTRO</button>
            </div>


        <div class="d-flex justify-content-between">
            <input class="input-form m-2" type="text" id="pais" name="pais" placeholder="País" aria-label="pais">
            <input class="input-form m-2" type="text" id="ciudad" name="ciudad" placeholder="Ciudad" aria-label="ciudad">
        </div>

        <iframe class="mt-4"
               id="mapa"
               loading="lazy"
               allowfullscreen
               referrerpolicy="no-referrer-when-downgrade"
               src="https://maps.google.com/maps?q=Plaza%20de%20Mayo%2C%20Buenos%20Aires&output=embed">
        </iframe>

        <div class="d-flex justify-content-between w-100">
            <button class="bg-color-pink text-white mt-2 mb-4" type="button" onclick="actualizarMapa()">Verificar Ubicación</button>
            <button class="bg-color-pink text-white mt-2 mb-4" type="button">Guardar</button>
        </div>

        <p class="text-center text-violet">¿No tienes una cuenta? <b><a href="/usuario/showLoginForm">Iniciar Sesión</a></b></p>
        <button class="w-100 bg-color-violet text-white" type="submit">Registrarse</button>
    </form>

</section>

<script>
    function actualizarMapa() {
        var paisInput = document.getElementById("pais");
        var ciudadInput = document.getElementById("ciudad");
        var mapaIframe = document.getElementById("mapa");

        var pais = paisInput.value;
        var ciudad = ciudadInput.value;
        var direccion = "";

        if (pais && ciudad) {
            direccion = ciudad + ", " + pais;
        } else if (ciudad) {
            direccion = ciudad;
        } else if (pais) {
            direccion = pais;
        }

        if (direccion) {
            // Nota: La URL de googleusercontent.com que proporcionaste puede no ser la más estándar
            // para embeber Google Maps. Una URL más común sería del tipo:
            // var url = "https://maps.google.com/maps?q=" + encodeURIComponent(direccion) + "&output=embed";
            // Mantendré la estructura que diste, pero considera esto.
            var url = "https://maps.google.com/maps?q=" + encodeURIComponent(direccion) + "&output=embed";
            mapaIframe.src = url;
        } else {
            // Opcional: Mostrar un mapa por defecto o un mensaje si no hay país/ciudad
            // mapaIframe.src = "https://maps.google.com/maps?q=World&output=embed";
             alert("Por favor, ingresa un país y/o ciudad.");
        }
    }
</script>

<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>